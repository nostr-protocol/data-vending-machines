---
layout: default
title: Recommend Follows
description: Job that recommends follows based on an algorithm
---

This service returns a list of recommended pubkeys (the ones with highest rank excluding source and its follows) sorted by an algorithm.

# Input

None. The DVM `i` input tag SHOULD NOT be used and `content` SHOULD be empty.

# Params

| Parameter | Type | Description | Default Value |
|-----|-----|-----|-----|
| `source` | string | The source pubkey used for personalized algorithms | The pubkey signing the DVM request |
| `context` | string | Additional context for the algorithm to compute | - |
| `distance` | int | Maximum (or minimum) number of hops in the graph to perform the calculation to (or from)  | `0` |
| `sort` | string | Algorithm used to sort results | Implementation-specific |
| `limit` | int | Maximum number of results returned in a response | Implementation-specific |

Pubkeys SHOULD be in hex format. Implementations MAY support automatic npub decoding.

Parameters `limit` and `sort` SHOULD NOT be required and are implementation-specific.

#### Sorting algorithms

Algorithms are used for sorting results and MAY be passed in the request. Each service will offer different ones, here is a non-exhaustive list:

 - `globalPagerank`: Global Pagerank
 - `personalizedPagerank`: Personalized Pagerank
 - `graperank`: Graperank
 - `verifiedFollowers`: Followers with a minimum rank (uses `personalizedPagerank` if source is provided or otherwise `globalPagerank`)
 - `distance`: Number of hops in the graph between source and target

# Output

The response MUST be a standard DVM response including the corresponding `e` and `p` tags. 

Its `content` field MUST return a JSON-stringified array of objects formatted as:

| Properties | Types | Description |
|-----|-----|-----|
| {`recommended`, `rank`} | {string, float} | Recommendation along with its rank |

Pubkeys SHOULD be in hex format.

Services MAY return objects in descending rank order for client convenience.

# How clients can use this

Offering users recommendations on accounts they may want to follow.

# Example

```json
{
  "id": "588d828025eab6404ed17c6c7a70d09a67c5da4ffe780e2f943f32509fe8af23",
  "pubkey": "79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",
  "created_at": 1732759754,
  "kind": 5313,
  "tags": [],
  "content": "",
  "sig": "e0174ad1416e0d722f06491909fe8e4781fd732c21df6424cf0f1dc422db53ba525d544a29927297f63543796750ed7abf5e3c10c0e40e72b8c916b9a751c078"
}
```

```json
{
  "id": "171a0a7551c785ab0e2ac99577bfc25dd4fe7c28a19cacfcb625b4be2964ea4a",
  "pubkey": "a9b008476119ea693cbd2f0b4de99fd346e2e30880b18d42234a1158bd323783",
  "created_at": 1732759756,
  "kind": 6313,
  "tags": [
    [
      "e",
      "588d828025eab6404ed17c6c7a70d09a67c5da4ffe780e2f943f32509fe8af23"
    ],
    [
      "p",
      "79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"
    ]
  ],
"content": "[{\"recommended\":\"bd0c0615960ff21214aee7f5b06fa0a104585938c8eb4b5cd4e2b109041fdf62\",\"rank\":0.0025},{\"recommended\":\"d05ab982e1105476ab68e4c6728d148f8e6222154e60cc359ef6b8599c820bea\",\"rank\":0.00163},{\"recommended\":\"6efd1b46b3e6d1ec2447af7c905827bc83e1330bee2c3a6a5b8e0769734785e2\",\"rank\":0.00154},{\"recommended\":\"bb17f1e4e516e75e82a5b5e81c0120ffeb24e9e92866962440b9888ae82e42a1\",\"rank\":0.00111},{\"recommended\":\"5097f9b8bd3ebb3c240a6a0c95bdf24d22a10211181f90ba29c41c31c889ba0a\",\"rank\":0.000107}]",
  "sig": "c79f34b9f5603b242e00f0b04782d579ffcec2cb45e511fbbf1ba3e04d5297f7eb7a071433b0a14300fbd766feaf5e8e1f6fbd216ae1cce1cb400f987fc2d0d2"
}
```

Formatted `content` JSON:

```json
[
	{
		"recommended": "bd0c0615960ff21214aee7f5b06fa0a104585938c8eb4b5cd4e2b109041fdf62",
		"rank": 0.0025
	},
	{
		"recommended": "d05ab982e1105476ab68e4c6728d148f8e6222154e60cc359ef6b8599c820bea",
		"rank": 0.00163
	},
	{
		"recommended": "6efd1b46b3e6d1ec2447af7c905827bc83e1330bee2c3a6a5b8e0769734785e2",
		"rank": 0.00154
	},
	{
		"recommended": "bb17f1e4e516e75e82a5b5e81c0120ffeb24e9e92866962440b9888ae82e42a1",
		"rank": 0.00111
	},
	{
		"recommended": "5097f9b8bd3ebb3c240a6a0c95bdf24d22a10211181f90ba29c41c31c889ba0a",
		"rank": 0.000107
	}
]
```