---
layout: default
title: Verify Reputation
description: Job that returns pubkey reputation information based on an algorithm
---

This service returns reputation information about a pubkey, including a list of pubkeys who follow it sorted by an algorithm.

# Input

None. The DVM `i` input tag SHOULD NOT be used and `content` SHOULD be empty.

# Params

| Parameter | Type | Description | Default Value |
|-----|-----|-----|-----|
| `source` | string | The source pubkeys used for personalized algorithms | The pubkey signing the DVM request |
| `target` | string | Pubkeys the requester is interested in | - |
| `context` | string | Additional context for the algorithm to compute | - |
| `distance` | int | Maximum (or minimum) number of hops in the graph to perform the calculation to (or from)  | `0` |
| `sort` | string | Algorithm used to sort results | Implementation-specific |
| `limit` | int | Maximum number of results returned in a response | Implementation-specific |
| `proofs` | boolean | Whether to return applicable events (kinds 0, 3, etc.) on the websocket connection for clients to verify certain claims | `false` |

Pubkeys SHOULD be in hex format. Implementations MAY support automatic npub decoding.

Multiple `source` and/or `target` parameters MAY be supplied. Algorithms that work with single values SHOULD take the first value in these lists.

Parameters `limit` and `sort` SHOULD NOT be required and are implementation-specific.

## Sorting algorithms

Algorithms are used for sorting results and MAY be passed in the request. Each service will offer different ones, here is a non-exhaustive list:

 - `globalPagerank`: Global Pagerank
 - `personalizedPagerank`: Personalized Pagerank
 - `graperank`: Graperank
 - `verifiedFollowers`: Followers with a minimum rank (uses `personalizedPagerank` if source is provided or otherwise `globalPagerank`)
 - `distance`: Number of hops in the graph between source and target

# Output

The response MUST be a standard DVM response including the corresponding `e` and `p` tags. 

Its `content` field MUST return a JSON-stringified array of objects formatted as:

| Properties | Types | Description |
|-----|-----|-----|
| {`target`, `rank`} | {string, float} | Requested target along with its rank |
| {`follower`, `rank`} | {string, float} | Follower of target along with its rank |

Pubkeys SHOULD be in hex format.

Services MAY return objects in descending rank order for client convenience.

# How clients can use this

  - Assessing trust for a new profile a user comes across, for example by showing which of their followers follow that new profile
  - Obtaining verified followers of a new profile
  - Detecting the probability that new profile is an impersonator

# Example

```json
{
  "id": "1cd2c73f53e602ae6f081997962bd43c730a565053080ab27ef7efb7335f7f49",
  "pubkey": "79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",
  "created_at": 1732758297,
  "kind": 5312,
  "tags": [
    [
      "param",
      "source",
      "79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"
    ],
    [
      "param",
      "target",
      "5097f9b8bd3ebb3c240a6a0c95bdf24d22a10211181f90ba29c41c31c889ba0a"
    ],
    [
      "param",
      "sort",
      "personalizedPagerank"
    ],
    [
      "param",
      "limit",
      5
    ],
    [
      "param",
      "proofs",
      false
    ]
  ],
  "content": "",
  "sig": "22f8aa10a0a3e9ef44f2b6a050868f46f19fcc1bbd9da3c3b291164405fb854a4b83524770d82d008a7415636554defcfb5ea52bf42e8a681a69ef10a81bc8e2"
}
```

```json
{
  "id": "26594511e04ee1b20b94719616a2380b3dcaf0430e2fd6d4dcf59d24f9175fca",
  "pubkey": "a9b008476119ea693cbd2f0b4de99fd346e2e30880b18d42234a1158bd323783",
  "created_at": 1732758298,
  "kind": 6312,
  "tags": [
    [
      "e",
      "1cd2c73f53e602ae6f081997962bd43c730a565053080ab27ef7efb7335f7f49"
    ],
    [
      "p",
      "79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"
    ]
  ],
  "content": "[{\"target\":\"f7c905827bc83e1330bee2c3a6a5b8e076976efd1b46b3e6d1ec2447a34785e2\",\"rank\":0.00266},
  {\"follower\":\"bd0c0615960ff21214aee7f5b06fa0a104585938c8eb4b5cd4e2b109041fdf62\",\"rank\":0.0025},{\"follower\":\"d05ab982e1105476ab68e4c6728d148f8e6222154e60cc359ef6b8599c820bea\",\"rank\":0.00163},{\"follower\":\"6efd1b46b3e6d1ec2447af7c905827bc83e1330bee2c3a6a5b8e0769734785e2\",\"rank\":0.00154},{\"follower\":\"bb17f1e4e516e75e82a5b5e81c0120ffeb24e9e92866962440b9888ae82e42a1\",\"rank\":0.00111},{\"follower\":\"5097f9b8bd3ebb3c240a6a0c95bdf24d22a10211181f90ba29c41c31c889ba0a\",\"rank\":0.000107}]",
  "sig": "3c25ff7f8d6d847775a9aafb8b1f28d2f2e9b53f78de7f53b49fbbe46402358dc281be263c20919a426cbea86fbe9d36951fd5dd86465181d9d49be056616f53"
}
```

Formatted `content` JSON:

```json
[
  {
		"target": "f7c905827bc83e1330bee2c3a6a5b8e076976efd1b46b3e6d1ec2447a34785e2",
		"rank": 0.00266
	},
	{
		"follower": "bd0c0615960ff21214aee7f5b06fa0a104585938c8eb4b5cd4e2b109041fdf62",
		"rank": 0.0025
	},
	{
		"follower": "d05ab982e1105476ab68e4c6728d148f8e6222154e60cc359ef6b8599c820bea",
		"rank": 0.00163
	},
	{
		"follower": "6efd1b46b3e6d1ec2447af7c905827bc83e1330bee2c3a6a5b8e0769734785e2",
		"rank": 0.00154
	},
	{
		"follower": "bb17f1e4e516e75e82a5b5e81c0120ffeb24e9e92866962440b9888ae82e42a1",
		"rank": 0.00111
	},
	{
		"follower": "5097f9b8bd3ebb3c240a6a0c95bdf24d22a10211181f90ba29c41c31c889ba0a",
		"rank": 0.000107
	}
]
```

Error response:

```json
{
  "kind": 7000,
  "id": "96f6eec0b3e410db91b85bee714740ec76ec64a9eb60a5503fee4dfc02047c1a",
  "pubkey": "5fc48ac4765ff81e9c51014b9d2f2c91621370f4c6b5452a9c06456e4cccaeb4",
  "created_at": 1738635799,
  "tags": [
      [
        "status",
        "error",
        "badly formatted key: npub1"
      ],
      [
        "e",
        "1cd2c73f53e602ae6f081997962bd43c730a565053080ab27ef7efb7335f7f49"
      ],
      [
        "p",
        "79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"
      ]
  ],
  "content": "",
  "sig": "6318c7ce6c57dd85779faadc4fed7733a1e50bd46205d52c96e535648dd2dd07e573e8d1fdef496d27014c80d1f2f604cb5337744d24000c00dde485ccdcf48c"
}
```