---
layout: default
title: Nostr Subdomain File Hosting
description: Pay to host files at a subdomain for a specified period of time.
---

Clients can request their files to be hosted at a subdomain for a defined period of time.

# Discovery

DVMs may make a list of domains available by publishing a NIP-89 application handler event, including any number of `domain` tags:

```jsonc
{
  "kind": 31990,
  "tags": [
    ["d", "<handler-id>"],
    ["k", "5902"],
    ["domain", "dvms.app"],
    ["domain", "dvms.store"]
  ]
}
```

# Input

- Event coordinate that points to a `30563` event.

```jsonc
{
  "kind": 5902,
  "tags": [
    [
      "i",
      "naddr1qqr8yctwv3hk6q3qye5ptcxfyyxl5vjvdjar2ua3f0hynkjzpx552mu5snj3qmx5pzjsxpqqqpmkxhxrap0",
      "text"
    ],
    ["param", "subdomain", "sub.dvms.app"],
    ["param", "start", "1709070000"],
    ["param", "end", "1709075753"]
  ]
}
```

# Params

## `subdomain`

If provided, files will be hosted at `subdomain.domain.com`. Otherwise, it is up to the service provider to assign a subdomain (eg. `random.domain.com`)

```jsonc
["param", "subdomain", "subdomain.domain.com"]
```

## `start`

If provided, files will be hosted since the specified timestamp and not before. Otherwise the hosting will start immediately. Service providers might enforce an upper limit for this parameter (eg. no more than 1 month into the future).

```jsonc
["param", "start", "1706830756"]
```

## `end`

If provided, the files will be hosted until the specified timestamp. Otherwise it is up to the service provider to provide a default `end` timestamp.

```jsonc
["param", "end", "1709075753"]
```

# Output

Service provider MUST send a kind `6902` when the hosting period ends.

```jsonc
{
  "kind": 6902,
  "content": "",
  "created_at": 1709075753
}
```

# Feedback

Service provider could send a kind `7000` feedback with payment required details.

```jsonc
{
  "kind": 7000,
  "content": "",
  "tags": [
    ["status", "payment-required"],
    ["amount", "<requested-amount>", "<bolt-11>"]
  ]
}
```

Service providers could send a status `error` with other subdomain suggestions if the subdomain specified in the job input is not available. The `content` is set to a JSON encoded array of suggestions.

```jsonc
{
  "kind": 7000,
  "content": "[\"other.dvms.app\",\"other.dvms.store\"]",
  "tags": [["status", "error"]]
}
```

Service provider MUST send a kind `7000` feedback with status `partial` when the hosting job is accepted.

```jsonc
{
  "kind": 7000,
  "content": "",
  "tags": [["status", "partial"]]
}
```

Service provider MUST send a kind `7000` feedback with status `success` when the hosting starts.

```jsonc
{
  "kind": 7000,
  "content": "",
  "tags": [["status", "success"]]
}
```
